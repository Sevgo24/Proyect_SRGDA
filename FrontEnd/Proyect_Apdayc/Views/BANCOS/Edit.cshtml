@model SGRDA.Entities.BEREC_BANKS_GRAL

@{
    ViewBag.Title = "APDAYC :: BANCOS";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<script src="@Url.Content("~/Scripts/SGRDA/Mantenimientos/mantenimiento.bancos.nuevo.js")"></script>


<style type="text/css">
    textarea {
        resize: none;
    }
</style>

<script>
    $(function () {
        var url;
        url = $(this).attr("href");

        $(".alert-link").hide();
        $("#message").hide();

        $("#nombre").hide();
        $("#std").hide();
        $("#descripcion").attr("disabled", "enabled");
        $("#btnSave").hide();
        $("#btncancel").hide();

        $("#btnedit").click(function () {
            $("#btnSave").show();
            $("#btncancel").show();
            $("#btnnuevo").hide();
            $("#dnombre").hide();
            $("#dstd").hide();
            $("#btnNeo").hide();

            $("#nombre").show();
            $("#std").show();

            $("#descripcion").removeAttr('disabled');
            $("#btnedit").hide();


            $("#BNK_NAME").focus();
            $("#message").hide();
            return false;
        })

        $("#btncancel").click(function () {
            $("#btnSave").hide();
            $("#btnnuevo").show();
            $("#dnombre").show();
            $("#dstd").show();

            $("#nombre").hide();
            $("#std").hide();

            $("#descripcion").attr("disabled", "enabled");
            $("#btnedit").show();
            $("#btncancel").hide();

            location.reload();

            return false;
        })
    });
</script>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
        
    <br />
    <center>  
    <table border="0" style="width: 98%;" id='FiltroTabla' cellspacing="2" cellpadding="2">

        <tr>
            <td colspan="4" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
                <table border="0" style=" width:100%;">
                        <tr>
                            <td>
                                <div id='divTituloPerfil' style="  text-align:left">
                                  Bancos - Actualización
                                     </div>

                            </td>
                            <td>
                    
                     <div style="float:right;">
                    <div class="botonLink" style="width: 80px;">
                        <a href="@Url.Action("../BANCOS/", "BANCOS")"   >
                            <div style="color: #000; font-weight: 200; margin-top: 3px; margin-left: 5px;">
                                Volver
                            <img src="@Url.Content("~/Images/botones/back.png")"  width="24"  />
                            </div>
                        </a>
                    </div>
                    &nbsp;
                        <div class="botonLink" style="width: 80px;" id="btnNeo">
                            <a href="@Url.Action("Create", "BANCOS")"  id="btnnuevo"  >
                                <div style="color: #000; font-weight: 200; margin-top: 3px; margin-left: 5px;">
                                    Nuevo
                                    <img src="@Url.Content("~/Images/botones/neo.png")"  width="24"  />
                                </div>
                            </a>
                        </div>
                    &nbsp;
                              <button id="btnedit" class="boton">
                                  <span style="color: #000; font-weight: 200;">Editar </span>
                                  <img src="@Url.Content("~/Images/botones/editb.png")" width="24" />
                              </button>
                    &nbsp;
                             <button id="btncancel" class="boton">
                                 <span style="color: #000; font-weight: 200;">Descartar </span>
                                 <img src="@Url.Content("~/Images/botones/undo.png")" width="24" />
                             </button>


                    &nbsp;
                               <button id="btnSave" class="boton">
                                   <span style="color: #000; font-weight: 200;">Grabar </span>
                                   <img src="@Url.Content("~/Images/botones/save.png")" width="24" />
                               </button>


                </div>
                                </td>
                            </tr></table>
            </td>

        </tr>

        <tr>
            <td colspan="4" style="height: 10px;"></td>
        </tr>

         <tr>
            <td style="width:12%; padding-left:27px">
                @Html.LabelFor(model => model.BNK_ID) :
                @Html.HiddenFor(model => model.OWNER, htmlAttributes: new { id = "OWNER" })  
                @Html.HiddenFor(model => model.BNK_ID, htmlAttributes: new { id = "BNK_ID" })
            </td>
            <td>
                @Html.TextBoxFor(model => model.BNK_ID, htmlAttributes: new { id = "BNK_ID", disabled = "disabled", style = "width:100px;" })
                @Html.ValidationMessageFor(model => model.BNK_ID)
            </td>
        </tr>

        <tr>
            <td style="width:12%; padding-left:27px">
                @Html.LabelFor(model => model.BNK_NAME) :
            </td>
            <td>
                @Html.TextBoxFor(model => model.BNK_NAME, htmlAttributes: new { id = "BNK_NAME", disabled = "disabled", style = "width:558px;" , maxLength = "40" })

            </td>
        </tr>          
       
        <tr>    
            <td colspan="2">                   
                <table border="0">
                <tr>
                    <td style="padding-left:25px">
                        @Html.LabelFor(model => model.BNK_C_BRANCH)                            
                    </td>
                    <td style="padding-left:30px">
                        @Html.TextBoxFor(model => model.BNK_C_BRANCH, htmlAttributes: new { id = "BNK_C_BRANCH", disabled = "disabled", style = "width:60px;", onkeydown = "return ValidateNumber(event);", maxLength = "2" })
                    </td>

                    <td style="padding-left:20px">
                        @Html.LabelFor(model => model.BNK_C_DC)                           
                    </td>
                    <td style="padding-left:58px">
                        @Html.TextBoxFor(model => model.BNK_C_DC, htmlAttributes: new { id = "BNK_C_DC", disabled = "disabled", style = "width:60px;", onkeydown = "return ValidateNumber(event);", maxLength = "2" })
                    </td>
                    <td style="padding-left:20px">
                        @Html.LabelFor(model => model.BNK_C_ACCOUNT)                        
                    </td>
                     <td style="padding-left:58px">
                        @Html.TextBoxFor(model => model.BNK_C_ACCOUNT, htmlAttributes: new { id = "BNK_C_ACCOUNT", disabled = "disabled", style = "width:60px;", onkeydown = "return ValidateNumber(event);", maxLength = "2" })

                    </td>
                </tr>
                </table>      
            </td>            
        </tr>

        <tr>
            <td colspan="4" style="height: 10px;"></td>
        </tr>


         <tr>
                                 <td  colspan="2" >
                                    <div id="tabs">
                                      <ul>
                                        <li><a href="#tabs-1">Sucursales</a></li>
                                        <li><a href="#tabs-2">Contactos</a></li>
                                      </ul>
                                      <div id="tabs-1">
                                          <table style=" width:100%;" border="0">
                                              <tr>
                                                  <td>
                                                      <div id="gridsucursales"></div>
                                                  </td>
                                              </tr>
                                          </table>   
                                      </div>

                                      <div id="tabs-2">
                                          <table style=" width:100%;" border="0">
                                          <tr>
                                                 <td>
                                                     <div id="gridcontactos"></div>
                                                 </td>
                                          </tr>
                                          </table>
                                      </div>
                                    </div> 
                                </td>
                            </tr>


    </table>
    </center>
}

<script>
    $("#btnedit").click(function () {
        document.getElementById("BNK_NAME").disabled = false;
        document.getElementById("BNK_C_BRANCH").disabled = false;
        document.getElementById("BNK_C_DC").disabled = false;
        document.getElementById("BNK_C_ACCOUNT").disabled = false;
    })
</script>

<script>
    $("#btncancel").click(function () {
        document.getElementById("BNK_NAME").disabled = true;
        document.getElementById("BNK_C_BRANCH").disabled = true;
        document.getElementById("BNK_C_DC").disabled = true;
        document.getElementById("BNK_C_ACCOUNT").disabled = true;
    })
</script>

<script type="text/ecmascript">

    if ('@TempData["msg"]' != "") {
        $(function () {
            $("#message").show();
            $(".alert-link").show();
        })
    };

    if ('@TempData["flag"]' == "1") {
        $("#btnNeo").hide();
        $("#btnedit").hide();
        $("#tabs").tabs();
        alert("Grabado correctamente.");
        location.href = "../"
    }

    if ('@TempData["flag"]' == "0") {
        if ('@TempData["msg"]' != "") {
            $(function () {
                $("#message").show();
                $(".alert-link").show();
            })
        };
    };
</script>

<br />
<div id="message">
    <div class="@TempData["class"]">
        <a id="lnk" href="#" class="alert-link"></a>@TempData["msg"]
    </div>
</div>


<script type="text/javascript">
    function ValidateNumber(e) {
        var evt = (e) ? e : window.event;
        var charCode = (evt.keyCode) ? evt.keyCode : evt.which;
        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        return true;
    };
</script>
